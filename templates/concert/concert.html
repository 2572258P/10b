{% extends 'concert/base.html' %}
{% load staticfiles %}

{% block title_block %}
{% if concert %}
    {{concert.concertName}}
{% endif %}
{% endblock %}


{% block style_block %}
    #concertBody {
      width: 70%;
      border: 0px solid black; 
      display: flex;
             align-items: bottom;
      
    }
    #concertBody div {
       padding:10px;
       flex: 1;
       border: 0px solid black; 
    }
    
{% endblock %}

{% block body_block %}
<div id="concertBody">
    {% if concert.img %}
        <div><img src={{concert.img.url}} style="width:100%;height:100%;object-fit:contain;"></div>
    {% else %}
        <script type="text/javascript">        
            var rand = Math.floor(Math.random() * 5) + 1;
            String.prototype.format = function (args) 
            {
                var newStr = this;
                for (var key in args) 
                {
                    newStr = newStr.replace('{' + key + '}', args[key]);
                }
                return newStr;
            }
            var hello = "<div><img src=\"/media/default_img/default{num}.png\"></div>".format({ num: rand })
            var str = ""
            document.write(hello)
        </script>
    {% endif %}
    
    <div style="flex:3">
        {% if concert %}
            <p>Concert Id : {{concert.concertId}}</p>
            <p>Concert Name : {{concert.concertName}}</p>
            <p>Band Name : {{concert.band.bandName}}</p>
            <p>Concert Date : {{concert.date}}</p>
            <p>Location : {{concert.location}}</p>
        {% endif %}
    </div>
    {% if user.is_authenticated %}
    <div style="align-self: flex-end;">
        <form id="booking" method="post" action="/booking/{{concert.concertId}}/"enctype="multipart/form-data">
         {% csrf_token %}
            <input type="submit" Value="Reserve Ticket">
        </form>
    </div>
    {%endif%}
</div>

{% endblock %}